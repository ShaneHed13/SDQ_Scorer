<!DOCTYPE html>
<html lang="en">

<head>
  <title>Student Records</title>
  <meta charset="UTF-8">
</head>

<body>

  <a href="/">Return to Homepage</a>
  <h1>Student Records</h1>

  <label for="child">Child's Name: </label>
  <input type="text" id="child" name="child">
  <button type="submit" onclick="getRecords()">Submit</button>

  <table id="results" style="display:none;">
    <tr>
      <th>ID</th>
      <th>Child</th>
      <th>Total</th>
      <th>Emotional Problems</th>
      <th>Conduct Problems</th>
      <th>Hyperactivity Problems</th>
      <th>Peer Problems</th>
      <th>Prosocial Behavior</th>
      <th>Impact Score</th>
      <th>Expiration Date</th>
    </tr>

    <% completedSDQ.forEach(function(r) { %>
      <tr>
        <td>
          <%= r.id %>
        </td>
        <td>
          <%= r.child %>
        </td>
        <td>
          <%= r.total %>
        </td>
        <td>
          <%= r.emotional %>
        </td>
        <td>
          <%= r.conduct %>
        </td>
        <td>
          <%= r.hyperactivity %>
        </td>
        <td>
          <%= r.peer %>
        </td>
        <td>
          <%= r.prosocial %>
        </td>
        <td>
          <%= r.impact %>
        </td>
        <td>
          <%= r.expires %>
        </td>
      </tr>
      <% }); %>

  </table>

  <script>

    const getRecords = async function () {


      document.getElementById('results').style.display = 'block'

      const response = await fetch('/log', {
        method: 'GET',
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },

        // body: JSON.stringify({
        //   total: '50',
        //   emotional: '10',
        //   conduct: '10',
        //   hyperactivity: '10',
        //   peer: '10',
        //   prosocial: '10',
        //   impact: '10',
        //   expires: "'4/22/2022'",

        // })

      });

      const result = await response.json();
      console.log(result);

      currentTaskId = id;

    };

  </script>

</body>

</html>